<script>
    //当天日期
    var date = new Date();
    //当前年、月、日及周
    var currentYear,currentMonth,currentDay,currentWeek;
    currentYear = date.getYear();
    currentMonth = date.getMonth();
    currentDay = date.getDate();
    currentWeek = date.getDay();


    /**
     * 格式化日期：yyyy-MM-dd 或 yyyy-MM-dd h:m:s
     * @param myDate 日期对象
     * @param hasTime 格式化时间（1：是）
     */
    function formatDate(myDate,hasTime) {
        var year = myDate.getFullYear();
        var month = myDate.getMonth() + 1;
        var day = myDate.getDate();
        var hour= myDate.getHours();
        var minute= myDate.getMinutes();
        var second=myDate.getSeconds();
        if(month < 10){
            month = '0' + month;
        }
        if(day < 10) {
            day = '0' + day;
        }
        if(minute < 10){
            minute ='0' + minute;
        }
        if(second < 10){
           second = '0' + second;
        }
        if(hasTime == 1){
            return(year + '-' + month + '-' + day + ' '+ hour + ':' + minute + ':' + second);
        }
        return(year + '-' + month + '-' + day);
    }


    function getLastDay(year, month) {
        var new_year = year; //取当前的年份
        var new_month = month++; //取下一个月的第一天，方便计算（最后一天不固定）
        if(month > 12) {
            new_month -= 12; //月份减
            new_year++; //年份增
        }
        var new_date = new Date(new_year, new_month, 1); //取当年当月中的第一天
        return(new Date(new_date.getTime() - 1000 * 60 * 60 * 24)).getDate(); //获取当月最后一天日期
    }

   /* var nowYear = now.getYear(); //当前年
    nowYear += (nowYear < 2000) ? 1900 : 0;*/

    //获取当前月
    function getMonth(add) {
        var add = add;
        if (add) {
            add=add;
        }else{
            add=0;
        }
        var now = new Date();
        var month = now.getMonth() + 1 +add; //月
        if (month>12) {
            month = month-12;
        }
        if (month<0) {
            month = month+12;
        }
        return month;
    }



    //获取昨天
    function getLastday() {
        var now = new Date();
        now = now.setDate(now.getDate() - 1);
        //		alert(now)
        var year = now.getFullYear(); //年
        var month = now.getMonth() + 1; //月
        var day = now.getDate(); //日
        var clock = year + "-";
        if(month < 10)
            clock += "0";
        clock += month + "-";
        if(day < 10)
            clock += "0";
        clock += day;

        return(clock);
    }

    //获取前几天
    function GetDateStr(AddDayCount) {
        var dd = new Date();
        dd.setDate(dd.getDate() + AddDayCount); //获取AddDayCount天后的日期
        var y = dd.getFullYear();
        var m = dd.getMonth() + 1; //获取当前月份的日期
        var d = dd.getDate();
        return y + "-" + m + "-" + d;
    }

    //获取当月最后一天
    function getMonthLastDay(month){
//构造当前日期对象
        var date = new Date();

//获取年份
        var year = date.getFullYear();

//获取当前月份
//var month = date.getMonth() + 1;
        var month = month;
//定义当月的天数；
        var days ;

//当月份为二月时，根据闰年还是非闰年判断天数
        if(month == 2){
            days= year % 4 == 0 ? 29 : 28;

        }
        else if(month == 1 || month == 3 || month == 5 || month == 7 || month == 8 || month == 10 || month == 12){
            //月份为：1,3,5,7,8,10,12 时，为大月.则天数为31；
            days= 31;
        }
        else{
            //其他月份，天数为：30.
            days= 30;
        }

        //输出天数

        var now = new Date();
        var year = now.getFullYear(); //年
        var clock = year + "-";
        if(month < 10)
            clock += "0";
        clock += month + "-";

        clock += days;
        return(clock);
    }
    //获取当月一号
    function getMonth01(add) {
        var add;
        if (add) {
            add=add;
        }else{
            add=0;
        }
        var now = new Date();
        var year = now.getFullYear(); //年
        var month = now.getMonth() + 1+add; //月
        var day = 01; //日
        var clock = year + "-";
        if(month < 10)
            clock += "0";
        clock += month + "-";
        if(day < 10)
            clock += "0";
        clock += day;
        return(clock);
    }

    //获取当前时间

    function getTime() {
        var now = new Date();
        var year = now.getFullYear(); //年
        var month = now.getMonth() + 1; //月
        var day = now.getDate(); //日
        var clock = year + "-";
        if(month < 10){
            clock += "0";
        }
        clock += month + "-";
        if(day < 10){
            clock += "0";
        }
        clock += day;
        return(clock);
    }


    //获得本季度的开始月份
    function getQuarterStartMonth() {
        var quarterStartMonth = 0;
        if(nowMonth < 3) {
            quarterStartMonth = 0;
        }
        if(2 < nowMonth && nowMonth < 6) {
            quarterStartMonth = 3;
        }
        if(5 < nowMonth && nowMonth < 9) {
            quarterStartMonth = 6;
        }
        if(nowMonth > 8) {
            quarterStartMonth = 9;
        }
        return quarterStartMonth;
    }

    //获得本周的开始日期
    function getWeekStartDate() {
        var weekStartDate = new Date(nowYear, nowMonth, nowDay - nowDayOfWeek + 1);
        return formatDate(weekStartDate);
    }

    //获得本周的结束日期
    function getWeekEndDate() {
        var weekEndDate = new Date(nowYear, nowMonth, nowDay);
        return formatDate(weekEndDate);
    }

    function getDate(day) {
        var zdate = new Date();
        var sdate = zdate.getTime() - (1 * 24 * 60 * 60 * 1000);
        var edate = new Date(sdate - (day * 24 * 60 * 60 * 1000)).format("yyyy-MM-dd");
        return edate;
    }

    //获得本月的开始日期
    function getMonthStartDate() {
        var monthStartDate = new Date(nowYear, nowMonth, 1);
        return formatDate(monthStartDate);
    }

    //获得本月的结束日期
    function getMonthEndDate() {
        var monthEndDate = new Date(nowYear, nowMonth, getMonthDays(nowMonth));
        return formatDate(monthEndDate);
    }

    //获得上个月的开始日期
    function getLastMonthStartDate() {
        var year2 = nowYear;
        var month2 = parseInt(nowMonth) - 1;
        if(month2 == 0) {
            year2 = parseInt(year2) - 1;
            month2 = 12;
        }

        var monthStartDate = new Date(year2, month2, 1);
        return formatDate(monthStartDate);
    }

    //获得上个月的结束日期
    function getLastMonthEndDate() {
        var year2 = nowYear;
        var month2 = parseInt(nowMonth) - 1;
        if(month2 == 0) {
            year2 = parseInt(year2) - 1;
            month2 = 12;
        }
        var monthEndDate = new Date(year2, month2, getMonthDays(month2));
        return formatDate(monthEndDate);
    }

    //获得某月的天数
    function getMonthDays(myMonth) {
        var monthStartDate = new Date(nowYear, myMonth, 1);
        var monthEndDate = new Date(nowYear, myMonth + 1, 1);
        var days = (monthEndDate - monthStartDate) / (1000 * 60 * 60 * 24);
        return days;
    }


</script>
